{
  "id": "arch_refactor_tasks_2026_01_25",
  "name": "architecture-refactor-tasks",
  "privacy": "private",
  "showInExplore": false,
  "collaboratorKey": "arch_refactor_tasks",
  "users": [
    {
      "id": "tF5VymUrdqX_ZbtjVUZjP",
      "name": "TT",
      "description": "AI YAPPER & Python dev",
      "website": null,
      "color": "rgb(138, 242, 200)",
      "cardsCreatedCount": 0,
      "cardsCreatedCountRaw": 0,
      "isModerator": null,
      "isDonor": null,
      "isAmbassador": null,
      "isUpgraded": true
    }
  ],
  "collaborators": [],
  "spectators": [],
  "background": null,
  "backgroundTint": "#3a2c37",
  "backgroundGradient": null,
  "backgroundIsGradient": false,
  "isTemplate": false,
  "cards": [
    {
      "position": {
        "x": 200,
        "y": 200
      },
      "isParentCard": true,
      "id": "task_01_canonical_messaging_adoption",
      "x": 200,
      "y": 200,
      "z": 0,
      "name": "Task 01: Canonical Messaging Adoption\nSummary: Production message handling does not use the canonical message and part types even though they exist. This creates a split between the tested canonical model and the runtime model, increasing the chance of divergent behavior and inconsistent message access patterns.\nContext: Canonical types live in `src/tunacode/types/canonical.py` and the adapter functions live in `src/tunacode/utils/messaging/adapter.py`, with strong test coverage in `tests/unit/types/test_canonical.py` and `tests/unit/types/test_adapter.py`. Runtime paths still rely on legacy accessors such as `get_message_content()` in `src/tunacode/utils/messaging/message_utils.py`, called from `src/tunacode/core/state.py`, `src/tunacode/ui/app.py`, and `src/tunacode/ui/headless/output.py`.\nDocs: PLAN.md; memory-bank/research/2026-01-25_architecture-refactor-status.md",
      "frameId": 0,
      "userId": "tF5VymUrdqX_ZbtjVUZjP",
      "urlIsHidden": true,
      "urlPreviewIsVisible": true,
      "width": 540,
      "height": 220,
      "isLocked": false,
      "backgroundColor": null,
      "isRemoved": false,
      "headerFontId": 6,
      "maxWidth": null,
      "spaceId": "arch_refactor_tasks_2026_01_25",
      "isComment": false,
      "shouldShowOtherSpacePreviewImage": true,
      "nameUpdatedAt": "2026-01-25T18:46:50+00:00",
      "nameUpdatedByUserId": "tF5VymUrdqX_ZbtjVUZjP",
      "prevWidth": 540,
      "prevHeight": 220,
      "linkToSpaceId": null,
      "linkToCardId": null,
      "linkToSpaceCollaboratorKey": null,
      "shouldHideUrlPreviewInfo": false,
      "shouldHideUrlPreviewImage": false,
      "shouldUpdateUrlPreview": false,
      "isTodo": false,
      "urlIsVisible": false,
      "urlPreviewUrl": null,
      "urlPreviewImage": null,
      "urlPreviewFavicon": null,
      "urlPreviewTitle": null,
      "urlPreviewDescription": null,
      "urlPreviewErrorUrl": null,
      "urlPreviewEmbedHtml": null,
      "urlPreviewIframeUrl": null,
      "resizeWidth": null,
      "isCreatedThroughPublicApi": false,
      "counterIsVisible": false,
      "counterValue": 0,
      "codeBlockLanguage": null,
      "tilt": 0,
      "headerFontSize": "s",
      "createdAt": "2026-01-25T18:46:50+00:00",
      "updatedAt": "2026-01-25T18:46:50+00:00"
    },
    {
      "position": {
        "x": 820,
        "y": 200
      },
      "isParentCard": true,
      "id": "task_02_session_state_decomposition",
      "x": 820,
      "y": 200,
      "z": 0,
      "name": "Task 02: SessionState Decomposition\nSummary: `SessionState` remains a single, large structure with mixed concerns and unclear ownership boundaries. The current shape makes it hard to reason about state responsibilities and amplifies coupling across unrelated domains.\nContext: `src/tunacode/core/state.py` contains 40+ fields including ReAct scratchpad data, todos, tool call tracking, and usage metrics. Planned sub-structures such as `ConversationState`, `ReActState`, `TaskState`, `RuntimeState`, and `UsageState` are listed in the refactor plan but do not exist in the codebase.\nDocs: PLAN.md; memory-bank/research/2026-01-25_architecture-refactor-status.md",
      "frameId": 0,
      "userId": "tF5VymUrdqX_ZbtjVUZjP",
      "urlIsHidden": true,
      "urlPreviewIsVisible": true,
      "width": 540,
      "height": 220,
      "isLocked": false,
      "backgroundColor": null,
      "isRemoved": false,
      "headerFontId": 6,
      "maxWidth": null,
      "spaceId": "arch_refactor_tasks_2026_01_25",
      "isComment": false,
      "shouldShowOtherSpacePreviewImage": true,
      "nameUpdatedAt": "2026-01-25T18:46:50+00:00",
      "nameUpdatedByUserId": "tF5VymUrdqX_ZbtjVUZjP",
      "prevWidth": 540,
      "prevHeight": 220,
      "linkToSpaceId": null,
      "linkToCardId": null,
      "linkToSpaceCollaboratorKey": null,
      "shouldHideUrlPreviewInfo": false,
      "shouldHideUrlPreviewImage": false,
      "shouldUpdateUrlPreview": false,
      "isTodo": false,
      "urlIsVisible": false,
      "urlPreviewUrl": null,
      "urlPreviewImage": null,
      "urlPreviewFavicon": null,
      "urlPreviewTitle": null,
      "urlPreviewDescription": null,
      "urlPreviewErrorUrl": null,
      "urlPreviewEmbedHtml": null,
      "urlPreviewIframeUrl": null,
      "resizeWidth": null,
      "isCreatedThroughPublicApi": false,
      "counterIsVisible": false,
      "counterValue": 0,
      "codeBlockLanguage": null,
      "tilt": 0,
      "headerFontSize": "s",
      "createdAt": "2026-01-25T18:46:50+00:00",
      "updatedAt": "2026-01-25T18:46:50+00:00"
    },
    {
      "position": {
        "x": 200,
        "y": 480
      },
      "isParentCard": true,
      "id": "task_03_message_parity_harness",
      "x": 200,
      "y": 480,
      "z": 0,
      "name": "Task 03: Message Parity Harness\nSummary: Parity validation between legacy message formats and canonical representations is incomplete. Without full parity coverage, there is limited confidence that adapter behavior matches real session data.\nContext: `tests/unit/types/test_adapter.py` includes limited parity checks and round-trip coverage, but `tests/parity/test_message_parity.py` does not exist. There is no validation against real historical session artifacts.\nDocs: PLAN.md; memory-bank/research/2026-01-25_architecture-refactor-status.md",
      "frameId": 0,
      "userId": "tF5VymUrdqX_ZbtjVUZjP",
      "urlIsHidden": true,
      "urlPreviewIsVisible": true,
      "width": 540,
      "height": 220,
      "isLocked": false,
      "backgroundColor": null,
      "isRemoved": false,
      "headerFontId": 6,
      "maxWidth": null,
      "spaceId": "arch_refactor_tasks_2026_01_25",
      "isComment": false,
      "shouldShowOtherSpacePreviewImage": true,
      "nameUpdatedAt": "2026-01-25T18:46:50+00:00",
      "nameUpdatedByUserId": "tF5VymUrdqX_ZbtjVUZjP",
      "prevWidth": 540,
      "prevHeight": 220,
      "linkToSpaceId": null,
      "linkToCardId": null,
      "linkToSpaceCollaboratorKey": null,
      "shouldHideUrlPreviewInfo": false,
      "shouldHideUrlPreviewImage": false,
      "shouldUpdateUrlPreview": false,
      "isTodo": false,
      "urlIsVisible": false,
      "urlPreviewUrl": null,
      "urlPreviewImage": null,
      "urlPreviewFavicon": null,
      "urlPreviewTitle": null,
      "urlPreviewDescription": null,
      "urlPreviewErrorUrl": null,
      "urlPreviewEmbedHtml": null,
      "urlPreviewIframeUrl": null,
      "resizeWidth": null,
      "isCreatedThroughPublicApi": false,
      "counterIsVisible": false,
      "counterValue": 0,
      "codeBlockLanguage": null,
      "tilt": 0,
      "headerFontSize": "s",
      "createdAt": "2026-01-25T18:46:50+00:00",
      "updatedAt": "2026-01-25T18:46:50+00:00"
    },
    {
      "position": {
        "x": 820,
        "y": 480
      },
      "isParentCard": true,
      "id": "task_04_canonical_sanitization",
      "x": 820,
      "y": 480,
      "z": 0,
      "name": "Task 04: Canonical Sanitization\nSummary: Message sanitization is currently polymorphic, complex, and spread across multiple code paths. This increases the risk of inconsistent cleanup rules and tool call linkage issues.\nContext: `src/tunacode/core/agents/resume/sanitize.py` is a large file with custom accessors for dict and object messages, including separate branches for tool call collection and dangling tool call removal. The refactor plan references a canonical sanitization flow, but it is not present.\nDocs: PLAN.md; memory-bank/research/2026-01-25_architecture-refactor-status.md",
      "frameId": 0,
      "userId": "tF5VymUrdqX_ZbtjVUZjP",
      "urlIsHidden": true,
      "urlPreviewIsVisible": true,
      "width": 540,
      "height": 220,
      "isLocked": false,
      "backgroundColor": null,
      "isRemoved": false,
      "headerFontId": 6,
      "maxWidth": null,
      "spaceId": "arch_refactor_tasks_2026_01_25",
      "isComment": false,
      "shouldShowOtherSpacePreviewImage": true,
      "nameUpdatedAt": "2026-01-25T18:46:50+00:00",
      "nameUpdatedByUserId": "tF5VymUrdqX_ZbtjVUZjP",
      "prevWidth": 540,
      "prevHeight": 220,
      "linkToSpaceId": null,
      "linkToCardId": null,
      "linkToSpaceCollaboratorKey": null,
      "shouldHideUrlPreviewInfo": false,
      "shouldHideUrlPreviewImage": false,
      "shouldUpdateUrlPreview": false,
      "isTodo": false,
      "urlIsVisible": false,
      "urlPreviewUrl": null,
      "urlPreviewImage": null,
      "urlPreviewFavicon": null,
      "urlPreviewTitle": null,
      "urlPreviewDescription": null,
      "urlPreviewErrorUrl": null,
      "urlPreviewEmbedHtml": null,
      "urlPreviewIframeUrl": null,
      "resizeWidth": null,
      "isCreatedThroughPublicApi": false,
      "counterIsVisible": false,
      "counterValue": 0,
      "codeBlockLanguage": null,
      "tilt": 0,
      "headerFontSize": "s",
      "createdAt": "2026-01-25T18:46:50+00:00",
      "updatedAt": "2026-01-25T18:46:50+00:00"
    },
    {
      "position": {
        "x": 200,
        "y": 760
      },
      "isParentCard": true,
      "id": "task_05_tool_call_registry_ownership",
      "x": 200,
      "y": 760,
      "z": 0,
      "name": "Task 05: Tool Call Registry Ownership\nSummary: Tool call lifecycle data is tracked in three separate places, which creates a high risk of divergence and unclear ownership. The lack of a single source of truth makes auditing and reconciliation difficult.\nContext: `SessionState` holds `tool_calls` and `tool_call_args_by_id` in `src/tunacode/core/state.py`, while message parts also represent tool call history. `src/tunacode/core/agents/agent_components/orchestrator/tool_dispatcher.py` and `src/tunacode/core/agents/resume/sanitize.py` both manipulate this data. `CanonicalToolCall` exists in `src/tunacode/types/canonical.py`, but a registry is not present.\nDocs: PLAN.md; memory-bank/research/2026-01-25_architecture-refactor-status.md",
      "frameId": 0,
      "userId": "tF5VymUrdqX_ZbtjVUZjP",
      "urlIsHidden": true,
      "urlPreviewIsVisible": true,
      "width": 540,
      "height": 220,
      "isLocked": false,
      "backgroundColor": null,
      "isRemoved": false,
      "headerFontId": 6,
      "maxWidth": null,
      "spaceId": "arch_refactor_tasks_2026_01_25",
      "isComment": false,
      "shouldShowOtherSpacePreviewImage": true,
      "nameUpdatedAt": "2026-01-25T18:46:50+00:00",
      "nameUpdatedByUserId": "tF5VymUrdqX_ZbtjVUZjP",
      "prevWidth": 540,
      "prevHeight": 220,
      "linkToSpaceId": null,
      "linkToCardId": null,
      "linkToSpaceCollaboratorKey": null,
      "shouldHideUrlPreviewInfo": false,
      "shouldHideUrlPreviewImage": false,
      "shouldUpdateUrlPreview": false,
      "isTodo": false,
      "urlIsVisible": false,
      "urlPreviewUrl": null,
      "urlPreviewImage": null,
      "urlPreviewFavicon": null,
      "urlPreviewTitle": null,
      "urlPreviewDescription": null,
      "urlPreviewErrorUrl": null,
      "urlPreviewEmbedHtml": null,
      "urlPreviewIframeUrl": null,
      "resizeWidth": null,
      "isCreatedThroughPublicApi": false,
      "counterIsVisible": false,
      "counterValue": 0,
      "codeBlockLanguage": null,
      "tilt": 0,
      "headerFontSize": "s",
      "createdAt": "2026-01-25T18:46:50+00:00",
      "updatedAt": "2026-01-25T18:46:50+00:00"
    },
    {
      "position": {
        "x": 820,
        "y": 760
      },
      "isParentCard": true,
      "id": "task_06_react_state_alignment",
      "x": 820,
      "y": 760,
      "z": 0,
      "name": "Task 06: ReAct State Alignment\nSummary: ReAct scratchpad data is stored as untyped dictionaries, which obscures invariants and complicates auditing of reasoning timelines. Typed structures exist but are not reflected in runtime state.\nContext: `src/tunacode/core/state.py` stores `react_scratchpad`, `react_forced_calls`, and `react_guidance` as loosely typed fields. Typed definitions for `ReActScratchpad` and `ReActEntry` exist in `src/tunacode/types/canonical.py` but are unused in production paths.\nDocs: PLAN.md; memory-bank/research/2026-01-25_architecture-refactor-status.md",
      "frameId": 0,
      "userId": "tF5VymUrdqX_ZbtjVUZjP",
      "urlIsHidden": true,
      "urlPreviewIsVisible": true,
      "width": 540,
      "height": 220,
      "isLocked": false,
      "backgroundColor": null,
      "isRemoved": false,
      "headerFontId": 6,
      "maxWidth": null,
      "spaceId": "arch_refactor_tasks_2026_01_25",
      "isComment": false,
      "shouldShowOtherSpacePreviewImage": true,
      "nameUpdatedAt": "2026-01-25T18:46:50+00:00",
      "nameUpdatedByUserId": "tF5VymUrdqX_ZbtjVUZjP",
      "prevWidth": 540,
      "prevHeight": 220,
      "linkToSpaceId": null,
      "linkToCardId": null,
      "linkToSpaceCollaboratorKey": null,
      "shouldHideUrlPreviewInfo": false,
      "shouldHideUrlPreviewImage": false,
      "shouldUpdateUrlPreview": false,
      "isTodo": false,
      "urlIsVisible": false,
      "urlPreviewUrl": null,
      "urlPreviewImage": null,
      "urlPreviewFavicon": null,
      "urlPreviewTitle": null,
      "urlPreviewDescription": null,
      "urlPreviewErrorUrl": null,
      "urlPreviewEmbedHtml": null,
      "urlPreviewIframeUrl": null,
      "resizeWidth": null,
      "isCreatedThroughPublicApi": false,
      "counterIsVisible": false,
      "counterValue": 0,
      "codeBlockLanguage": null,
      "tilt": 0,
      "headerFontSize": "s",
      "createdAt": "2026-01-25T18:46:50+00:00",
      "updatedAt": "2026-01-25T18:46:50+00:00"
    },
    {
      "position": {
        "x": 200,
        "y": 1040
      },
      "isParentCard": true,
      "id": "task_07_todo_state_alignment",
      "x": 200,
      "y": 1040,
      "z": 0,
      "name": "Task 07: Todo State Alignment\nSummary: Todo items are represented as generic dictionaries with no explicit lifecycle semantics, creating inconsistent task status tracking across the session lifecycle.\nContext: `src/tunacode/core/state.py` stores todos as `list[dict[str, Any]]`. Typed `TodoItem` and `TodoStatus` are available in `src/tunacode/types/canonical.py` but are not referenced by runtime state.\nDocs: PLAN.md; memory-bank/research/2026-01-25_architecture-refactor-status.md",
      "frameId": 0,
      "userId": "tF5VymUrdqX_ZbtjVUZjP",
      "urlIsHidden": true,
      "urlPreviewIsVisible": true,
      "width": 540,
      "height": 220,
      "isLocked": false,
      "backgroundColor": null,
      "isRemoved": false,
      "headerFontId": 6,
      "maxWidth": null,
      "spaceId": "arch_refactor_tasks_2026_01_25",
      "isComment": false,
      "shouldShowOtherSpacePreviewImage": true,
      "nameUpdatedAt": "2026-01-25T18:46:50+00:00",
      "nameUpdatedByUserId": "tF5VymUrdqX_ZbtjVUZjP",
      "prevWidth": 540,
      "prevHeight": 220,
      "linkToSpaceId": null,
      "linkToCardId": null,
      "linkToSpaceCollaboratorKey": null,
      "shouldHideUrlPreviewInfo": false,
      "shouldHideUrlPreviewImage": false,
      "shouldUpdateUrlPreview": false,
      "isTodo": false,
      "urlIsVisible": false,
      "urlPreviewUrl": null,
      "urlPreviewImage": null,
      "urlPreviewFavicon": null,
      "urlPreviewTitle": null,
      "urlPreviewDescription": null,
      "urlPreviewErrorUrl": null,
      "urlPreviewEmbedHtml": null,
      "urlPreviewIframeUrl": null,
      "resizeWidth": null,
      "isCreatedThroughPublicApi": false,
      "counterIsVisible": false,
      "counterValue": 0,
      "codeBlockLanguage": null,
      "tilt": 0,
      "headerFontSize": "s",
      "createdAt": "2026-01-25T18:46:50+00:00",
      "updatedAt": "2026-01-25T18:46:50+00:00"
    },
    {
      "position": {
        "x": 820,
        "y": 1040
      },
      "isParentCard": true,
      "id": "task_08_usage_metrics_consolidation",
      "x": 820,
      "y": 1040,
      "z": 0,
      "name": "Task 08: Usage Metrics Consolidation\nSummary: Usage tracking relies on ad hoc dictionary structures and duplicates totals across multiple fields. This makes metric definitions inconsistent and complicates reporting.\nContext: `src/tunacode/core/state.py` stores `last_call_usage` and `session_total_usage` as dicts with repeated fields. Canonical `UsageMetrics` exists in `src/tunacode/types/canonical.py`, and `TokenUsage` and `CostBreakdown` exist in `src/tunacode/types/dataclasses.py`, but production usage remains untyped.\nDocs: PLAN.md; memory-bank/research/2026-01-25_architecture-refactor-status.md",
      "frameId": 0,
      "userId": "tF5VymUrdqX_ZbtjVUZjP",
      "urlIsHidden": true,
      "urlPreviewIsVisible": true,
      "width": 540,
      "height": 220,
      "isLocked": false,
      "backgroundColor": null,
      "isRemoved": false,
      "headerFontId": 6,
      "maxWidth": null,
      "spaceId": "arch_refactor_tasks_2026_01_25",
      "isComment": false,
      "shouldShowOtherSpacePreviewImage": true,
      "nameUpdatedAt": "2026-01-25T18:46:50+00:00",
      "nameUpdatedByUserId": "tF5VymUrdqX_ZbtjVUZjP",
      "prevWidth": 540,
      "prevHeight": 220,
      "linkToSpaceId": null,
      "linkToCardId": null,
      "linkToSpaceCollaboratorKey": null,
      "shouldHideUrlPreviewInfo": false,
      "shouldHideUrlPreviewImage": false,
      "shouldUpdateUrlPreview": false,
      "isTodo": false,
      "urlIsVisible": false,
      "urlPreviewUrl": null,
      "urlPreviewImage": null,
      "urlPreviewFavicon": null,
      "urlPreviewTitle": null,
      "urlPreviewDescription": null,
      "urlPreviewErrorUrl": null,
      "urlPreviewEmbedHtml": null,
      "urlPreviewIframeUrl": null,
      "resizeWidth": null,
      "isCreatedThroughPublicApi": false,
      "counterIsVisible": false,
      "counterValue": 0,
      "codeBlockLanguage": null,
      "tilt": 0,
      "headerFontSize": "s",
      "createdAt": "2026-01-25T18:46:50+00:00",
      "updatedAt": "2026-01-25T18:46:50+00:00"
    },
    {
      "position": {
        "x": 200,
        "y": 1320
      },
      "isParentCard": true,
      "id": "task_09_architecture_enforcement_tests",
      "x": 200,
      "y": 1320,
      "z": 0,
      "name": "Task 09: Architecture Enforcement Tests\nSummary: There is no automated enforcement of architectural boundaries or state complexity limits. This leaves dependency direction and layering rules vulnerable to regression.\nContext: `tests/architecture/` does not exist. The refactor plan calls out tests for dependency direction, SessionState field limits, and type contracts, but these checks are not present in the test suite.\nDocs: PLAN.md; memory-bank/research/2026-01-25_architecture-refactor-status.md",
      "frameId": 0,
      "userId": "tF5VymUrdqX_ZbtjVUZjP",
      "urlIsHidden": true,
      "urlPreviewIsVisible": true,
      "width": 540,
      "height": 220,
      "isLocked": false,
      "backgroundColor": null,
      "isRemoved": false,
      "headerFontId": 6,
      "maxWidth": null,
      "spaceId": "arch_refactor_tasks_2026_01_25",
      "isComment": false,
      "shouldShowOtherSpacePreviewImage": true,
      "nameUpdatedAt": "2026-01-25T18:46:50+00:00",
      "nameUpdatedByUserId": "tF5VymUrdqX_ZbtjVUZjP",
      "prevWidth": 540,
      "prevHeight": 220,
      "linkToSpaceId": null,
      "linkToCardId": null,
      "linkToSpaceCollaboratorKey": null,
      "shouldHideUrlPreviewInfo": false,
      "shouldHideUrlPreviewImage": false,
      "shouldUpdateUrlPreview": false,
      "isTodo": false,
      "urlIsVisible": false,
      "urlPreviewUrl": null,
      "urlPreviewImage": null,
      "urlPreviewFavicon": null,
      "urlPreviewTitle": null,
      "urlPreviewDescription": null,
      "urlPreviewErrorUrl": null,
      "urlPreviewEmbedHtml": null,
      "urlPreviewIframeUrl": null,
      "resizeWidth": null,
      "isCreatedThroughPublicApi": false,
      "counterIsVisible": false,
      "counterValue": 0,
      "codeBlockLanguage": null,
      "tilt": 0,
      "headerFontSize": "s",
      "createdAt": "2026-01-25T18:46:50+00:00",
      "updatedAt": "2026-01-25T18:46:50+00:00"
    },
    {
      "position": {
        "x": 820,
        "y": 1320
      },
      "isParentCard": true,
      "id": "task_10_legacy_path_decommission",
      "x": 820,
      "y": 1320,
      "z": 0,
      "name": "Task 10: Legacy Path Decommission\nSummary: Legacy message access patterns and polymorphic flows remain active, keeping the system anchored to older behavior even as canonical types exist. This preserves divergence between modern and legacy paths.\nContext: `src/tunacode/utils/messaging/message_utils.py` provides `get_message_content()`, which is still called from `src/tunacode/core/state.py`, `src/tunacode/ui/app.py`, and `src/tunacode/ui/headless/output.py`. Polymorphic sanitization in `src/tunacode/core/agents/resume/sanitize.py` also remains part of the runtime flow.\nDocs: PLAN.md; memory-bank/research/2026-01-25_architecture-refactor-status.md",
      "frameId": 0,
      "userId": "tF5VymUrdqX_ZbtjVUZjP",
      "urlIsHidden": true,
      "urlPreviewIsVisible": true,
      "width": 540,
      "height": 220,
      "isLocked": false,
      "backgroundColor": null,
      "isRemoved": false,
      "headerFontId": 6,
      "maxWidth": null,
      "spaceId": "arch_refactor_tasks_2026_01_25",
      "isComment": false,
      "shouldShowOtherSpacePreviewImage": true,
      "nameUpdatedAt": "2026-01-25T18:46:50+00:00",
      "nameUpdatedByUserId": "tF5VymUrdqX_ZbtjVUZjP",
      "prevWidth": 540,
      "prevHeight": 220,
      "linkToSpaceId": null,
      "linkToCardId": null,
      "linkToSpaceCollaboratorKey": null,
      "shouldHideUrlPreviewInfo": false,
      "shouldHideUrlPreviewImage": false,
      "shouldUpdateUrlPreview": false,
      "isTodo": false,
      "urlIsVisible": false,
      "urlPreviewUrl": null,
      "urlPreviewImage": null,
      "urlPreviewFavicon": null,
      "urlPreviewTitle": null,
      "urlPreviewDescription": null,
      "urlPreviewErrorUrl": null,
      "urlPreviewEmbedHtml": null,
      "urlPreviewIframeUrl": null,
      "resizeWidth": null,
      "isCreatedThroughPublicApi": false,
      "counterIsVisible": false,
      "counterValue": 0,
      "codeBlockLanguage": null,
      "tilt": 0,
      "headerFontSize": "s",
      "createdAt": "2026-01-25T18:46:50+00:00",
      "updatedAt": "2026-01-25T18:46:50+00:00"
    }
  ],
  "connections": [
    {
      "id": "conn_task_03_message_parity_harness_to_task_01_canonical_messaging_adoption",
      "startItemId": "task_03_message_parity_harness",
      "endItemId": "task_01_canonical_messaging_adoption",
      "path": "m470,590 L470,310",
      "labelIsVisible": false,
      "labelRelativePositionX": 0.5,
      "labelRelativePositionY": 0.5,
      "directionIsVisible": false,
      "controlPoint": null,
      "createdAt": "2026-01-25T18:47:41+00:00",
      "updatedAt": "2026-01-25T18:47:41+00:00",
      "spaceId": "arch_refactor_tasks_2026_01_25",
      "userId": "tF5VymUrdqX_ZbtjVUZjP",
      "connectionTypeId": "dependency"
    },
    {
      "id": "conn_task_01_canonical_messaging_adoption_to_task_02_session_state_decomposition",
      "startItemId": "task_01_canonical_messaging_adoption",
      "endItemId": "task_02_session_state_decomposition",
      "path": "m470,310 L1090,310",
      "labelIsVisible": false,
      "labelRelativePositionX": 0.5,
      "labelRelativePositionY": 0.5,
      "directionIsVisible": false,
      "controlPoint": null,
      "createdAt": "2026-01-25T18:47:41+00:00",
      "updatedAt": "2026-01-25T18:47:41+00:00",
      "spaceId": "arch_refactor_tasks_2026_01_25",
      "userId": "tF5VymUrdqX_ZbtjVUZjP",
      "connectionTypeId": "dependency"
    },
    {
      "id": "conn_task_02_session_state_decomposition_to_task_05_tool_call_registry_ownership",
      "startItemId": "task_02_session_state_decomposition",
      "endItemId": "task_05_tool_call_registry_ownership",
      "path": "m1090,310 L470,870",
      "labelIsVisible": false,
      "labelRelativePositionX": 0.5,
      "labelRelativePositionY": 0.5,
      "directionIsVisible": false,
      "controlPoint": null,
      "createdAt": "2026-01-25T18:47:41+00:00",
      "updatedAt": "2026-01-25T18:47:41+00:00",
      "spaceId": "arch_refactor_tasks_2026_01_25",
      "userId": "tF5VymUrdqX_ZbtjVUZjP",
      "connectionTypeId": "dependency"
    },
    {
      "id": "conn_task_02_session_state_decomposition_to_task_06_react_state_alignment",
      "startItemId": "task_02_session_state_decomposition",
      "endItemId": "task_06_react_state_alignment",
      "path": "m1090,310 L1090,870",
      "labelIsVisible": false,
      "labelRelativePositionX": 0.5,
      "labelRelativePositionY": 0.5,
      "directionIsVisible": false,
      "controlPoint": null,
      "createdAt": "2026-01-25T18:47:41+00:00",
      "updatedAt": "2026-01-25T18:47:41+00:00",
      "spaceId": "arch_refactor_tasks_2026_01_25",
      "userId": "tF5VymUrdqX_ZbtjVUZjP",
      "connectionTypeId": "dependency"
    },
    {
      "id": "conn_task_02_session_state_decomposition_to_task_07_todo_state_alignment",
      "startItemId": "task_02_session_state_decomposition",
      "endItemId": "task_07_todo_state_alignment",
      "path": "m1090,310 L470,1150",
      "labelIsVisible": false,
      "labelRelativePositionX": 0.5,
      "labelRelativePositionY": 0.5,
      "directionIsVisible": false,
      "controlPoint": null,
      "createdAt": "2026-01-25T18:47:41+00:00",
      "updatedAt": "2026-01-25T18:47:41+00:00",
      "spaceId": "arch_refactor_tasks_2026_01_25",
      "userId": "tF5VymUrdqX_ZbtjVUZjP",
      "connectionTypeId": "dependency"
    },
    {
      "id": "conn_task_02_session_state_decomposition_to_task_08_usage_metrics_consolidation",
      "startItemId": "task_02_session_state_decomposition",
      "endItemId": "task_08_usage_metrics_consolidation",
      "path": "m1090,310 L1090,1150",
      "labelIsVisible": false,
      "labelRelativePositionX": 0.5,
      "labelRelativePositionY": 0.5,
      "directionIsVisible": false,
      "controlPoint": null,
      "createdAt": "2026-01-25T18:47:41+00:00",
      "updatedAt": "2026-01-25T18:47:41+00:00",
      "spaceId": "arch_refactor_tasks_2026_01_25",
      "userId": "tF5VymUrdqX_ZbtjVUZjP",
      "connectionTypeId": "dependency"
    },
    {
      "id": "conn_task_05_tool_call_registry_ownership_to_task_04_canonical_sanitization",
      "startItemId": "task_05_tool_call_registry_ownership",
      "endItemId": "task_04_canonical_sanitization",
      "path": "m470,870 L1090,590",
      "labelIsVisible": false,
      "labelRelativePositionX": 0.5,
      "labelRelativePositionY": 0.5,
      "directionIsVisible": false,
      "controlPoint": null,
      "createdAt": "2026-01-25T18:47:41+00:00",
      "updatedAt": "2026-01-25T18:47:41+00:00",
      "spaceId": "arch_refactor_tasks_2026_01_25",
      "userId": "tF5VymUrdqX_ZbtjVUZjP",
      "connectionTypeId": "dependency"
    },
    {
      "id": "conn_task_03_message_parity_harness_to_task_04_canonical_sanitization",
      "startItemId": "task_03_message_parity_harness",
      "endItemId": "task_04_canonical_sanitization",
      "path": "m470,590 L1090,590",
      "labelIsVisible": false,
      "labelRelativePositionX": 0.5,
      "labelRelativePositionY": 0.5,
      "directionIsVisible": false,
      "controlPoint": null,
      "createdAt": "2026-01-25T18:47:41+00:00",
      "updatedAt": "2026-01-25T18:47:41+00:00",
      "spaceId": "arch_refactor_tasks_2026_01_25",
      "userId": "tF5VymUrdqX_ZbtjVUZjP",
      "connectionTypeId": "dependency"
    },
    {
      "id": "conn_task_02_session_state_decomposition_to_task_09_architecture_enforcement_tests",
      "startItemId": "task_02_session_state_decomposition",
      "endItemId": "task_09_architecture_enforcement_tests",
      "path": "m1090,310 L470,1430",
      "labelIsVisible": false,
      "labelRelativePositionX": 0.5,
      "labelRelativePositionY": 0.5,
      "directionIsVisible": false,
      "controlPoint": null,
      "createdAt": "2026-01-25T18:47:41+00:00",
      "updatedAt": "2026-01-25T18:47:41+00:00",
      "spaceId": "arch_refactor_tasks_2026_01_25",
      "userId": "tF5VymUrdqX_ZbtjVUZjP",
      "connectionTypeId": "dependency"
    },
    {
      "id": "conn_task_04_canonical_sanitization_to_task_10_legacy_path_decommission",
      "startItemId": "task_04_canonical_sanitization",
      "endItemId": "task_10_legacy_path_decommission",
      "path": "m1090,590 L1090,1430",
      "labelIsVisible": false,
      "labelRelativePositionX": 0.5,
      "labelRelativePositionY": 0.5,
      "directionIsVisible": false,
      "controlPoint": null,
      "createdAt": "2026-01-25T18:47:41+00:00",
      "updatedAt": "2026-01-25T18:47:41+00:00",
      "spaceId": "arch_refactor_tasks_2026_01_25",
      "userId": "tF5VymUrdqX_ZbtjVUZjP",
      "connectionTypeId": "dependency"
    },
    {
      "id": "conn_task_01_canonical_messaging_adoption_to_task_10_legacy_path_decommission",
      "startItemId": "task_01_canonical_messaging_adoption",
      "endItemId": "task_10_legacy_path_decommission",
      "path": "m470,310 L1090,1430",
      "labelIsVisible": false,
      "labelRelativePositionX": 0.5,
      "labelRelativePositionY": 0.5,
      "directionIsVisible": false,
      "controlPoint": null,
      "createdAt": "2026-01-25T18:47:41+00:00",
      "updatedAt": "2026-01-25T18:47:41+00:00",
      "spaceId": "arch_refactor_tasks_2026_01_25",
      "userId": "tF5VymUrdqX_ZbtjVUZjP",
      "connectionTypeId": "dependency"
    },
    {
      "id": "conn_task_09_architecture_enforcement_tests_to_task_10_legacy_path_decommission",
      "startItemId": "task_09_architecture_enforcement_tests",
      "endItemId": "task_10_legacy_path_decommission",
      "path": "m470,1430 L1090,1430",
      "labelIsVisible": false,
      "labelRelativePositionX": 0.5,
      "labelRelativePositionY": 0.5,
      "directionIsVisible": false,
      "controlPoint": null,
      "createdAt": "2026-01-25T18:47:41+00:00",
      "updatedAt": "2026-01-25T18:47:41+00:00",
      "spaceId": "arch_refactor_tasks_2026_01_25",
      "userId": "tF5VymUrdqX_ZbtjVUZjP",
      "connectionTypeId": "dependency"
    }
  ],
  "connectionTypes": [
    {
      "id": "dependency",
      "name": "Dependency",
      "color": "#0b6e4f",
      "createdAt": "2026-01-25T18:47:41+00:00",
      "updatedAt": "2026-01-25T18:47:41+00:00",
      "spaceId": "arch_refactor_tasks_2026_01_25",
      "userId": "tF5VymUrdqX_ZbtjVUZjP"
    }
  ],
  "cacheDate": 1769366810137,
  "removedCards": [],
  "originSpaceId": "1",
  "tags": [],
  "boxes": [],
  "lines": [],
  "visits": 0,
  "isRemoved": false,
  "groupId": null,
  "group": null,
  "drawingStrokes": [],
  "drawingImage": "",
  "userId": "tF5VymUrdqX_ZbtjVUZjP",
  "proposedShowInExplore": false,
  "url": "architecture-refactor-tasks",
  "showInExploreUpdatedAt": null,
  "removedByUserId": null,
  "readOnlyKey": null,
  "updateHash": "arch_refactor_map",
  "editedAt": "2026-01-25T18:47:41+00:00",
  "editedByUserId": "tF5VymUrdqX_ZbtjVUZjP",
  "previewImage": null,
  "previewThumbnailImage": null,
  "isRestrictedByModerator": false,
  "addedToGroupByUserId": null,
  "createdAt": "2026-01-25T18:46:50+00:00",
  "updatedAt": "2026-01-25T18:47:41+00:00",
  "connectionsTypes": [
    {
      "id": "dependency",
      "name": "Dependency",
      "color": "#0b6e4f",
      "createdAt": "2026-01-25T18:47:41+00:00",
      "updatedAt": "2026-01-25T18:47:41+00:00",
      "spaceId": "arch_refactor_tasks_2026_01_25",
      "userId": "tF5VymUrdqX_ZbtjVUZjP"
    }
  ]
}
